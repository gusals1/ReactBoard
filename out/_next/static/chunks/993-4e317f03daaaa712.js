"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[993],{6833:function(e,r,t){t.d(r,{$:function(){return z}});var n=t(4051),a=t.n(n),o=t(3695),u=t(1230),d=t(319);function i(){var e,r,t=(e=["\n  mutation deleteBoard($boardId: ID!) {\n    deleteBoard(boardId: $boardId)\n  }\n"],r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}})));return i=function(){return t},t}var s=(0,u.Ps)(i()),c=t(1163);function l(){var e,r,t=(e=["\n  mutation createBoard($createBoardInput: CreateBoardInput!) {\n    createBoard(createBoardInput: $createBoardInput) {\n      _id\n    }\n  }\n"],r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}})));return l=function(){return t},t}var f=(0,u.Ps)(l());function p(){var e,r,t=(e=["\n  mutation updateBoard(\n    $boardId: ID!\n    $password: String\n    $updateBoardInput: UpdateBoardInput!\n  ) {\n    updateBoard(\n      boardId: $boardId\n      password: $password\n      updateBoardInput: $updateBoardInput\n    ) {\n      _id\n    }\n  }\n"],r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}})));return p=function(){return t},t}var b=(0,u.Ps)(p()),v=t(7294),y=t(6486),m=t.n(y),h=t(1014),I=t(4467);function w(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function A(e,r,t,n,a,o,u){try{var d=e[o](u),i=d.value}catch(s){return void t(s)}d.done?r(i):Promise.resolve(i).then(n,a)}function g(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function u(e){A(o,n,a,u,d,"next",e)}function d(e){A(o,n,a,u,d,"throw",e)}u(void 0)}))}}function B(e,r){return null!=r&&"undefined"!==typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](e):e instanceof r}function k(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,o=[],u=!0,d=!1;try{for(t=t.call(e);!(u=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);u=!0);}catch(i){d=!0,a=i}finally{try{u||null==t.return||t.return()}finally{if(d)throw a}}return o}}(e,r)||j(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,r){if(e){if("string"===typeof e)return w(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?w(e,r):void 0}}var z=function(e){var r=[],t=(0,c.useRouter)(),n=(0,v.useState)(""),u=n[0],i=n[1],l=k((0,I.s)(),1)[0],p=k((0,d.D)(f),1)[0],y=k((0,d.D)(b),1)[0],w=k((0,d.D)(s),1)[0],A=m().debounce((function(e){i(e)}),500),j=function(){var r=g(a().mark((function r(n){var u,d,i,s,c,f;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.files&&e.setValue&&n.boardAddress){r.next=2;break}return r.abrupt("return");case 2:return e.setValue("images",e.files),n.images||(n.images=["","",""]),r.next=6,Promise.all(n.images.filter((function(e){return e})).map(function(){var e=g(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({variables:{file:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 6:return u=r.sent,i=u.map((function(e){var r;return null!==(d=null===(r=e.data)||void 0===r?void 0:r.uploadFile.url)&&void 0!==d?d:""})),r.prev=9,r.next=13,p({variables:{createBoardInput:{writer:n.writer,password:n.password,title:n.title,contents:n.contents,youtubeUrl:n.youtubeUrl,boardAddress:{zipcode:n.boardAddress.zipcode,address:n.boardAddress.address,addressDetail:n.boardAddress.zipcode},images:i}},update:function(e,r){var t=r.data;e.modify({fields:{fetchBoards:function(){return[null===t||void 0===t?void 0:t.createBoard]}}})}});case 13:if(f=r.sent,void 0!==(null===(s=f.data)||void 0===s?void 0:s.createBoard._id)){r.next=17;break}return o.Z.error({content:"\uc694\uccad\uc5d0 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4"}),r.abrupt("return");case 17:o.Z.success({content:"\uac8c\uc2dc\uae00 \ub4f1\ub85d\uc5d0 \uc131\uacf5\ud558\uc168\uc2b5\ub2c8\ub2e4"}),t.push("/boards/".concat(null===f||void 0===f||null===(c=f.data)||void 0===c?void 0:c.createBoard._id)),r.next=24;break;case 21:r.prev=21,r.t0=r.catch(9),B(r.t0,Error)&&o.Z.error({content:r.t0.message});case 24:case"end":return r.stop()}}),r,null,[[9,21]])})));return function(e){return r.apply(this,arguments)}}(),z=function(){var r=g(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.boardId){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,r.next=5,w({variables:{boardId:e.boardId},update:function(e,r){var t=r.data;e.modify({fields:{fetchBoards:function(e,r){var n=r.readField,a=null===t||void 0===t?void 0:t.deleteBoard;return x(e.filter((function(e){return n("_id",e)!==a})))}}})}});case 5:t.push("/boards"),o.Z.success({content:"\uac8c\uc2dc\uae00\uc744 \uc0ad\uc81c\ud588\uc2b5\ub2c8\ub2e4"}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),B(r.t0,Error)&&o.Z.error({content:r.t0.message});case 12:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(){return r.apply(this,arguments)}}(),O=function(){var n=g(a().mark((function n(d){var i,s,c,f,p,b,v,m,I,w;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.files&&e.setValue&&d.images){n.next=3;break}return n.abrupt("return");case 3:if(d.boardAddress){n.next=5;break}return n.abrupt("return");case 5:if(t&&"string"===typeof t.query.boardId){n.next=7;break}return n.abrupt("return");case 7:return e.setValue("images",e.files),null===(i=e.imageUrls)||void 0===i||i.forEach((function(e,t){e.includes("codecamp")&&(r[t]=e)})),n.next=11,Promise.all(e.files.filter((function(e){return e})).map(function(){var e=g(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({variables:{file:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()));case 11:for(s=n.sent,f=s.map((function(e){var r;return null!==(c=null===(r=e.data)||void 0===r?void 0:r.uploadFile.url)&&void 0!==c?c:""})),p=0,b=0;b<r.length;b++)void 0===r[b]&&p<f.length&&(r[b]=f[p],p++);for(;p<f.length;)r.push(f[p]),p++;return v={},d.title&&(v.title=d.title),d.contents&&(v.contents=d.contents),d.youtubeUrl&&(v.youtubeUrl=d.youtubeUrl),d.boardAddress.zipcode&&d.boardAddress.address&&d.boardAddress.addressDetail&&(v.boardAddress={},d.boardAddress.zipcode&&(v.boardAddress.zipcode=d.boardAddress.zipcode),d.boardAddress.address&&(v.boardAddress.address=d.boardAddress.address),d.boardAddress.addressDetail&&(v.boardAddress.addressDetail=d.boardAddress.addressDetail)),f&&(v.images=r),n.prev=23,n.next=27,y({variables:{boardId:t.query.boardId,password:u,updateBoardInput:v},refetchQueries:[{query:h.u,variables:{boardId:t.query.boardId}}]});case 27:if(w=n.sent,void 0!==(null===(m=w.data)||void 0===m?void 0:m.updateBoard._id)){n.next=31;break}return o.Z.error({content:"\uc694\uccad\uc5d0 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4"}),n.abrupt("return");case 31:o.Z.success({content:"\uac8c\uc2dc\uae00 \uc218\uc815\uc5d0 \uc131\uacf5\ud558\uc168\uc2b5\ub2c8\ub2e4"}),t.push("/boards/".concat(null===(I=w.data)||void 0===I?void 0:I.updateBoard._id)),n.next=38;break;case 35:n.prev=35,n.t0=n.catch(23),B(n.t0,Error)&&o.Z.error({content:n.t0.message});case 38:case"end":return n.stop()}}),n,null,[[23,35]])})));return function(e){return n.apply(this,arguments)}}();return{onClickDelete:z,onClickWrite:j,onClickEdit:O,onChangePassword:function(e){A(e.target.value)}}}},7572:function(e,r,t){t.d(r,{z:function(){return a}});var n=t(1163),a=function(e){var r=(0,n.useRouter)().query[e];return r?"string"===typeof r?{id:r}:"object"===typeof r?{id:r[0]}:{id:""}:{id:""}}},3464:function(e,r,t){t.d(r,{O:function(){return a}});var n=t(7294),a=function(){var e=(0,n.useState)(!1),r=e[0],t=e[1];return[r,function(){t((function(e){return!e}))}]}},4467:function(e,r,t){t.d(r,{s:function(){return d}});var n=t(1230),a=t(319);function o(){var e,r,t=(e=["\n  mutation uploadFile($file: Upload!) {\n    uploadFile(file: $file) {\n      url\n    }\n  }\n"],r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}})));return o=function(){return t},t}var u=(0,n.Ps)(o()),d=function(){return(0,a.D)(u)}},1014:function(e,r,t){t.d(r,{u:function(){return u},H:function(){return d}});var n=t(1230),a=t(6812);function o(){var e,r,t=(e=["\n  query fetchBoard($boardId: ID!) {\n    fetchBoard(boardId: $boardId) {\n      _id\n      writer\n      title\n      contents\n      createdAt\n      likeCount\n      dislikeCount\n      youtubeUrl\n      boardAddress {\n        zipcode\n        address\n        addressDetail\n      }\n      images\n    }\n  }\n"],r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}})));return o=function(){return t},t}var u=(0,n.Ps)(o()),d=function(e){return(0,a.a)(u,{variables:e})}}}]);